(this.webpackJsonpgeorgsgame=this.webpackJsonpgeorgsgame||[]).push([[4],{68:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var s,n=a(27),r=a(33),o=a(34),c=a(39),l=a(38),i=a(12),d=a(2),b=a.n(d),j=a(32),g=a.n(j),u=a(52),h=a(54),p=a(4),f=function(e){var t=e.draw,a=Object(h.a)(e,["draw"]),s=Object(d.useRef)(null);return Object(d.useEffect)((function(){var e,a=s.current,n=a.getContext("2d"),r=0,o=a.getBoundingClientRect(),c=o.width;o.height;if(a.width){a.width<c&&(a.width=5*a.width*1.75,a.height=5*a.height,n.scale(5,5))}return function a(){r++,t(n,r),e=window.requestAnimationFrame(a)}(),function(){window.cancelAnimationFrame(e)}}),[t]),Object(p.jsx)("canvas",Object(u.a)({className:"canvas",style:{width:"1150px",height:"450px",padding:"100px 50px 50px 50px"},ref:s},a))},m=(a(68),a(28)),O=a(9),y=a(23),x=a.n(y),C=a(97),k=a(98),v=a(99),S=a(100),w=a(35),T=a.n(w),R=(a(89),a(40)),_=(a(91),a(20)),G=a(92),N={top:0,bottom:1},X={0:"top",1:"bottom"},I={apiKey:"AIzaSyDtKtCjmDGio_3jsEqsI0cIleqndvD4pJg",authDomain:"georgsgame-3d44e.firebaseapp.com",databaseId:"georgsgame-3d44e.firebaseio.com",projectId:"georgsgame-3d44e",storageBucket:"georgsgame-3d44e.appspot.com",messagingSenderId:"768069468543",appId:"1:768069468543:web:2b5b620699311106775a4a"},F={H:{name:"H",style:{backgroundColor:"#99b898"}},X:{name:"X",style:{backgroundColor:"#feceab"}},Y:{name:"Y",style:{backgroundColor:"#ff847c"}},Z:{name:"Z",style:{backgroundColor:"#e84a5f"}},S:{name:"S",style:{backgroundColor:"#ffcc00"}},S_dg:{name:"S\u271d",style:{backgroundColor:"#ffcc00"}},"S\u271d":{name:"S\u271d",style:{backgroundColor:"#ffcc00"}},T:{name:"T",style:{backgroundColor:"#00d9ff"}},Ry:{name:"Ry",style:{backgroundColor:"#9403fc"}},T_dg:{name:"T\u271d",style:{backgroundColor:"#00d9ff"}},"T\u271d":{name:"T\u271d",style:{backgroundColor:"#00d9ff"}},CX0:{name:"CX0",style:{backgroundColor:"#00a6ff"}},CX1:{name:"CX1",style:{backgroundColor:"#00a6ff"}},_:{name:"",style:{backgroundColor:"rgba(52, 52, 52, 0)"}},"*":{name:"",style:{backgroundColor:"rgba(52, 52, 52, 0)"}}},U=(s={H:{name:"H",style:{backgroundColor:"#99b898"}}},Object(i.a)(s,"H",{name:"H",style:{backgroundColor:"#99b898"}}),Object(i.a)(s,"H",{name:"H",style:{backgroundColor:"#99b898"}}),Object(i.a)(s,"X",{name:"X",style:{backgroundColor:"#feceab"}}),Object(i.a)(s,"Y",{name:"Y",style:{backgroundColor:"#ff847c"}}),Object(i.a)(s,"Z",{name:"Z",style:{backgroundColor:"#e84a5f"}}),Object(i.a)(s,"S",{name:"S",style:{backgroundColor:"#ffcc00"}}),Object(i.a)(s,"S_dg",{name:"S\u271d",style:{backgroundColor:"#ffcc00"}}),Object(i.a)(s,"T",{name:"T",style:{backgroundColor:"#00d9ff"}}),Object(i.a)(s,"T_dg",{name:"T\u271d",style:{backgroundColor:"#00d9ff"}}),Object(i.a)(s,"CX0",{name:"CX0",style:{backgroundColor:"#00a6ff"}}),Object(i.a)(s,"CX1",{name:"CX1",style:{backgroundColor:"#00a6ff"}}),Object(i.a)(s,"Ry",{name:"Ry",style:{backgroundColor:"#9403fc"}}),s),q=function(){return Object(p.jsx)("nav",{children:Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{children:Object(p.jsx)(m.b,{exact:!0,activeClassName:"current",to:"/qtop",children:"Player QTop"})}),Object(p.jsx)("li",{children:Object(p.jsx)(m.b,{exact:!0,activeClassName:"current",to:"/qbot",children:"Player QBottom"})})]})})};function H(){var e=Object(_.b)().collection("games").doc("game"),t=Object(_.c)(e),a=t.status,s=t.data;if("loading"===a)return Object(p.jsx)("p",{children:"Fetching Data..."});var n=[s.game[0].split(","),s.game[1].split(",")];return Object(p.jsx)(P,{gameState:n,turn:s.turn,playerType:"top",probs:s.probs})}function $(){var e=Object(_.b)().collection("games").doc("game"),t=Object(_.c)(e),a=t.status,s=t.data;if("loading"===a)return Object(p.jsx)("p",{children:"Fetching Data..."});var n=[s.game[0].split(","),s.game[1].split(",")];return Object(p.jsx)(P,{gameState:n,turn:s.turn,playerType:"bottom",probs:s.probs})}var B=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var s;Object(r.a)(this,a),s=t.call(this,e);var n=G.sampleSize(Object.keys(U),6);return console.log("hand"),console.log(n),s.state={cards:n},s}return Object(o.a)(a,[{key:"renderGateCard",value:function(e){var t=F[e];return Object(p.jsx)(D,{name:t.name,style:t.style,handleCardUse:this.props.handleCardUse})}},{key:"render",value:function(){for(var e=Array(5).fill(null),t=0;t<this.state.cards.length;t++)e.push(Object(p.jsx)("div",{children:this.renderGateCard(this.state.cards[t])},t));return Object(p.jsx)(C.a,{children:Object(p.jsx)(k.a,{children:Object(p.jsxs)(v.a,{className:"deck",children:[Object(p.jsx)("div",{style:{color:"white",padding:2,marginBottom:"25px",fontSize:"2.5rem"},children:"Gate Cards"}),Object(p.jsx)("div",{id:"card-space",style:{marginLeft:50},children:Object(p.jsx)(k.a,{className:"cards",children:e})})]})})})}}]),a}(b.a.Component);function D(e){return Object(p.jsx)(v.a,{className:"card",style:e.style,onClick:function(){e.handleCardUse(e.name)},children:e.name})}function A(){return Object(p.jsxs)(_.a,{firebaseConfig:I,children:[Object(p.jsx)("center",{children:Object(p.jsx)("h1",{children:"Georg's Game"})}),Object(p.jsx)(q,{})]})}var P=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).state={gates:e.gameState,probs:e.probs},s.handleCardUse=s.handleCardUse.bind(Object(n.a)(s)),s}return Object(o.a)(a,[{key:"componentDidUpdate",value:function(e,t){t.gates!==this.props.gameState&&(this.setState({gates:this.props.gameState}),console.log("new_gates"))}},{key:"resetGame",value:function(){R.a.firestore().collection("games").doc("game").set({turn:0,game:["_,_,_,_,_","_,_,_,_,_"],probs:["100%","0%","0%","0%"]})}},{key:"handleCardUse",value:function(e){var t=this;if(this.props.playerType==X[this.props.turn%2]){var a=this.state.gates;console.log(a),console.log();for(var s=a[N[this.props.playerType]],n=0;n<s.length;n++)if(console.log(">>>"),console.log(n),console.log(s[n]),console.log(">>>"),"_"==s[n]){if(e.includes("C")){for(var r=0;r<2;r++)a[r][n]=e;console.log(a)}else s[n]=e;break}var o=[a[0].join(","),a[1].join(",")],c={state:[a[0],a[1]]};console.log("data"),console.log(c);T.a.post("https://georgsgame.herokuapp.com/api/get/probabilities",{data:c},{headers:{"Content-Type":"application/json"}}).then((function(e){t.setState({probs:e.data}),console.log("New probs:"),console.table(e.data),R.a.firestore().collection("games").doc("game").set({turn:t.props.turn+1,game:o,probs:e.data}).then()}))}else alert("Not your turn, wait for the other player.");if(9==this.props.turn){alert("Game over!");var l=this.state.gates,i=(l[0].join(","),l[1].join(","),{state:[l[0],l[1]]});T.a.post("https://georgsgame.herokuapp.com/api/get/measurement",{data:i},{headers:{"Content-Type":"application/json"}}).then((function(e){console.log("request successful!"),console.log(e.data),parseInt(e.data[0])-parseInt(e.data[1])==0?alert("Constant measurement "+e.data+". Top wins"):alert("Balanced measurement  "+e.data+". Bottom wins"),t.resetGame()}))}}},{key:"fillRect",value:function(e,t,a,s,n){e.fillRect(t,a,s,n),e.stroke()}},{key:"fillRectCenter",value:function(e,t,a,s,n){e.fillRect(t-s/2,a-s/2,s,n),e.stroke()}},{key:"fillCircle",value:function(e,t,a,s){e.fillStyle="#00a6ff",e.arc(t,a,s,0,2*Math.PI),e.fill()}},{key:"render",value:function(){var e=this,t=this.props.playerType==X[this.props.turn%2]?"your turn":"opponent's turn";return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"game-title",children:"Georg's Game: Circuit Showdown!"}),Object(p.jsx)(C.a,{children:Object(p.jsxs)(k.a,{children:[Object(p.jsxs)(v.a,{children:["Probabilities",Object(p.jsxs)(C.a,{className:"probabilites-box",children:[Object(p.jsxs)(k.a,{children:[Object(p.jsxs)(v.a,{children:[Object(p.jsx)(x.a,{children:" $ p(| 00 \\rangle ) = $"}),this.state.probs[0]]}),Object(p.jsxs)(v.a,{children:[Object(p.jsx)(x.a,{children:" $ p(| 01 \\rangle ) = $"}),this.state.probs[1]]})]}),Object(p.jsxs)(k.a,{children:[Object(p.jsxs)(v.a,{children:[Object(p.jsx)(x.a,{children:" $ p(| 10 \\rangle ) = $"}),this.state.probs[2]]}),Object(p.jsxs)(v.a,{children:[Object(p.jsx)(x.a,{children:" $ p(| 11 \\rangle ) = $"}),this.state.probs[3]]})]})]})]}),Object(p.jsx)(v.a,{}),Object(p.jsxs)(v.a,{children:["Turns",Object(p.jsxs)(C.a,{children:[Object(p.jsxs)(k.a,{className:"turn-box",children:["Turn ",this.props.turn+1,"/10 - ",X[this.props.turn%2]," (",t,")"]}),Object(p.jsx)(k.a,{className:"reset-container",children:Object(p.jsx)(S.a,{className:"reset",onClick:function(){e.resetGame()},children:"Reset Game"})})]})]})]})}),Object(p.jsx)(f,{draw:function(t,a){t.font="30px Arial",t.clearRect(0,0,t.canvas.width,t.canvas.height),t.fillStyle="#000000";var s=[30,90];e.fillRect(t,20,s[0],500,2),e.fillRect(t,20,s[1],500,2);var n=50,r=[10,50];console.log(e.state.gates);for(var o=0;o<e.state.gates.length;o++)for(var c=s[o],l=0;l<e.state.gates[0].length;l++){var i=l*(500/(e.state.gates[0].length-1))*.6-20,d=F[e.state.gates[o][l]];if(t.strokeStyle="white",!e.state.gates[o][l].includes("C")&&d.style)console.log(e.state.gates[o][l]),t.fillStyle=d.style.backgroundColor,e.fillRect(t,i+25,c-25,n,n),t.fillStyle="#FFF",t.fillText(d.name,i+40,c+10);else{t.fillStyle=d.style.backgroundColor;var b=null;b=e.state.gates[o][l].includes("0")?[0,1]:[1,0],0==o?(e.fillRectCenter(t,i+n,c,2,s[1]-s[0]),e.fillRectCenter(t,i+n,c,r[b[o]],r[b[o]])):e.fillRectCenter(t,i+n,c,r[b[o]],r[b[o]]),b[o]&&(t.font="25px Arial",t.fillStyle="#FFF",t.fillText(d.name,i+25,c+10))}}}}),Object(p.jsx)(B,{handleCardUse:this.handleCardUse})]})}}]),a}(b.a.Component);function Y(){return Object(p.jsx)(_.a,{firebaseConfig:I,children:Object(p.jsxs)(O.c,{children:[Object(p.jsx)(O.a,{exact:!0,path:"/",component:A}),Object(p.jsx)(O.a,{exact:!0,path:"/qtop",component:H}),Object(p.jsx)(O.a,{exact:!0,path:"/qbot",component:$})]})})}g.a.render(Object(p.jsx)(m.a,{children:Object(p.jsx)(Y,{})}),document.getElementById("root"))}},[[95,8,10]]]);
//# sourceMappingURL=main.a569090e.chunk.js.map